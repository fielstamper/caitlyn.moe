<div id="lastfm-grid"><slot /></div>

<script>
    const LASTFM_KEY = "e2567caa43c5b556780a6470968e8bb1";

    fetch(
        "https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=lightafterruin&api_key=e2567caa43c5b556780a6470968e8bb1&extended=1&format=json&limit=4",
    )
        .then((response) => response.json())
        .then((jsonData) => {
            const lastfmGrid = document.getElementById("lastfm-grid");
            const tracks = jsonData.recenttracks.track;

            for (const track of tracks) {
                const trackURL = document.createElement("p");
                trackURL.textContent = track.url;

                const trackAnchor = document.createElement("a");
                trackAnchor.className = "track";
                trackAnchor.setAttribute("href", track.url);

                const artistName = document.createElement("p");
                artistName.textContent = track.artist.name;
                artistName.classList.add("artistName");

                const trackNameP = document.createElement("p");
                trackNameP.textContent = track.name;
                trackNameP.classList.add("redColor");

                const trackImg = document.createElement("img");
                trackImg.src = track.image[2]["#text"];
                trackImg.classList.add("trackImg");

                trackAnchor.append(trackImg, trackNameP, artistName);
                lastfmGrid.append(trackAnchor);
            }
        });
</script>

<style is:global>
    #lastfm-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-template-rows: 1fr;
        grid-column-gap: 0px;
        grid-row-gap: 0px;
        width: 46.875em;
        height: 12em;
        gap: 20px;
        overflow: hidden;
        text-align: center;
    }

    @media (max-width: 768px) {
        #lastfm-grid {
            max-width: 90%;
            overflow-x: scroll;
        }
    }

    .trackImg {
        height: 125px;
        width: 125px;
        transition: all 0.25s
            linear(
                0,
                0.0014 0.52%,
                0.0066 1.14%,
                0.0248 2.27%,
                0.0553 3.51%,
                0.1016 4.96%,
                0.1988 7.44%,
                0.4395 12.92%,
                0.5468 15.5%,
                0.6508 18.29%,
                0.7369 20.98%,
                0.8114,
                0.8711 26.56%,
                0.8967 28.01%,
                0.9204,
                0.9406,
                0.9576 32.66%,
                0.982 35.55%,
                0.9998 38.76%,
                1.0112 42.37%,
                1.0167 46.51%,
                1.0165 52.61%,
                1.0062 67.18%,
                1.0021 76.07%,
                0.9997 99.94%
            );
        opacity: 100%;
    }

    @media (max-width: 768px) {
        .trackImg {
            height: 100px;
            width: 100px;
        }
    }

    .trackImg:hover {
        background-color: rgba(12, 12, 12, 0.336);
        transform: scale(1.04);
        opacity: 50%;
    }

    .redColor {
        color: #dbdbdbcb;
    }

    @media (max-width: 768px) {
        .redColor,
        .artistName {
            font-size: 12px;
        }
    }

    .artistName {
        font-weight: 200px;
        color: #dbdbdb67;
    }
</style>
